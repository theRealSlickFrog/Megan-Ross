<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Blog Post - Ross Estate Law</title>
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<link rel="stylesheet" type="text/css" href="css/cookie-consent.css">
	<script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

	<style>
		/* Reset and base styles */
		body {
			background: #0b080c;
			color: #ffffff;
			font-family: 'QuestrialRegular', sans-serif;
			font-size: 16px;
			margin: 0;
			min-width: 940px;
			padding: 0;
		}

		a {
			outline: none;
		}

		img {
			border: 0;
		}

		/* Header */
		#header {
			background: url(images/bg-gray.png) repeat-x left top;
			height: 306px;
			position: relative;
			width: 100%;
			z-index: 2;
		}

		#header div {
			margin: 0 auto;
			width: 940px;
		}

		#header div a.logo {
			background: url(images/dogs.jpg) no-repeat center top;
			display: block;
			height: 306px;
			text-indent: -99999px;
		}

		/* Navigation */
		#navigation {
			background: url(images/bg-gray.png) repeat-x left top;
			border-bottom: 1px solid #999999;
			height: 54px;
			position: sticky;
			top: 0;
			width: 100%;
			z-index: 100;
		}

		#navigation div {
			margin: 0 auto;
			width: 1000px;
		}

		#navigation div ul {
			list-style: none;
			margin: 0;
			padding: 0;
			overflow: visible;
		}

		#navigation div ul li {
			float: left;
			margin: 0;
			position: relative;
			width: 235px;
		}

		/* Body */
		#body {
			background: #cac8c8 url(images/bg-content2.png) repeat-x left top;
			width: 100%;
			min-height: 500px;
		}

		/* Blog Post Full View */
		.blog-post-full {
			max-width: 1600px;
			margin: 40px auto;
			padding: 40px 80px;
			background: white;
			border-radius: 12px;
			box-shadow: 0 4px 20px rgba(0,0,0,0.15);
			overflow-wrap: break-word;
		}

		.blog-post-full h1 {
			color: #2c2c2c;
			font-size: 55px;
			font-weight: bold;
			margin: 0 0 15px 0;
			line-height: 1.3;
		}

		.blog-post-full .date {
			color: #8ab4a8;
			font-size: 21px;
			font-weight: 600;
			margin-bottom: 30px;
			display: block;
			text-transform: uppercase;
			letter-spacing: 0.5px;
		}

		.blog-post-full .featured-image {
			width: 100%;
			max-width: 800px;
			height: auto;
			border-radius: 8px;
			margin: 0 auto 30px auto;
			display: block;
		}

		.blog-post-full .content {
			color: #333;
			font-size: 26px;
			line-height: 1.6;
		}

		.blog-post-full .content p {
			margin-bottom: 1.5em;
			color: #333;
			line-height: 1.6;
		}

		.blog-post-full .content p + p {
			margin-top: 1em;
		}

		.back-link {
			display: inline-block;
			margin: 20px 0;
			color: #8ab4a8;
			text-decoration: none;
			font-size: 18px;
			font-weight: 600;
		}

		.back-link:hover {
			color: #6b9d8f;
		}

		#loading {
			text-align: center;
			color: white;
			font-size: 20px;
			padding: 100px 20px;
		}

		/* Contact & Footer */
		.contact-banner {
			background: #2c2c2c;
			color: white;
			padding: 40px 0;
			width: 100%;
		}

		.contact-content {
			margin: 0 auto;
			max-width: 1200px;
			padding: 0 20px;
		}

		.contact-info h2 {
			color: white;
			font-size: 36px;
			margin: 0 0 30px 0;
			text-align: center;
		}

		.contact-details {
			display: flex;
			justify-content: center;
			gap: 60px;
			flex-wrap: wrap;
		}

		.contact-item {
			text-align: center;
		}

		.contact-item span {
			display: block;
			font-size: 18px;
			line-height: 24px;
		}

		.contact-item .phone {
			font-size: 24px;
			font-weight: bold;
		}

		.contact-item .email {
			font-size: 20px;
			text-decoration: none;
		}

		.contact-item .address {
			font-size: 16px;
			line-height: 22px;
		}

		#footer {
			margin: 0 auto;
			min-height: 120px;
			height: auto;
			overflow: hidden;
			width: 100%;
			text-align: center;
			padding: 30px 0;
		}

		#footer ul {
			list-style: none;
			margin: 0 auto;
			padding: 8px 0;
			display: inline-flex;
			gap: 10px;
			flex-wrap: wrap;
			justify-content: center;
			width: auto;
		}

		#footer ul li {
			border: none;
			float: none;
			display: inline;
			height: auto;
		}

		#footer ul li:first-child {
			border: 0;
		}

		#footer ul li a {
			color: #aaa;
			display: inline;
			font-family: 'QuestrialRegular', Arial, sans-serif;
			font-size: 20px;
			line-height: normal;
			height: auto;
			padding: 0 4px;
			text-align: center;
			text-decoration: none;
		}

		#footer ul li a:hover {
			color: #eeb58c;
		}

		/* Hamburger Menu Styles */
		.hamburger {
			display: none;
		}

		/* Mobile Responsive Styles */
		@media (max-width: 768px) {
			body {
				min-width: 0;
			}

			/* Hamburger Menu */
			.hamburger {
				display: block;
				position: absolute;
				top: 15px;
				right: 20px;
				background: none;
				border: none;
				cursor: pointer;
				padding: 10px;
				z-index: 1000;
				width: 44px;
				height: 44px;
			}

			.hamburger-line {
				display: block;
				width: 25px;
				height: 3px;
				background-color: #666666;
				margin: 5px 0;
				transition: 0.3s;
			}

			.hamburger.active .hamburger-line:nth-child(1) {
				transform: rotate(-45deg) translate(-5px, 6px);
			}

			.hamburger.active .hamburger-line:nth-child(2) {
				opacity: 0;
			}

			.hamburger.active .hamburger-line:nth-child(3) {
				transform: rotate(45deg) translate(-5px, -6px);
			}

			/* Header */
			#header {
				height: 150px;
			}

			#header div {
				width: 100%;
			}

			#header div a.logo {
				height: 150px;
				background-size: contain;
				background-position: center top;
			}

			/* Navigation */
			#navigation {
				height: auto;
			}

			#navigation div {
				width: 100%;
			}

			#navigation div ul {
				display: none;
				position: absolute;
				top: 54px;
				left: 0;
				width: 100%;
				background: #f5f5f5;
				box-shadow: 0 2px 5px rgba(0,0,0,0.1);
				padding: 0;
				margin: 0;
			}

			#navigation div ul.mobile-active {
				display: block;
			}

			#navigation div ul li {
				width: 100%;
				float: none;
			}

			#navigation div ul li a {
				font-size: 20px !important;
				padding: 15px 20px !important;
				display: block;
				border-bottom: 1px solid #ddd;
				min-height: 44px;
				text-align: left;
			}

			.dropdown-content {
				position: static !important;
				box-shadow: none !important;
				width: 100% !important;
				background: #efefef !important;
				border-radius: 0 !important;
				left: 0 !important;
			}

			.dropdown-content.services-dropdown {
				width: 100% !important;
				left: 0 !important;
			}

			.dropdown-content a {
				padding: 12px 40px !important;
				font-size: 18px !important;
				border-bottom: 1px solid #ddd !important;
			}

			/* Body */
			#body {
				min-height: 400px;
			}

			/* Blog post content */
			.blog-post-full {
				margin: 20px 10px;
				padding: 30px 20px;
				max-width: 100%;
			}

			.blog-post-full h1 {
				font-size: 32px;
				line-height: 1.2;
				margin-bottom: 15px;
			}

			.blog-post-full .date {
				font-size: 16px;
				margin-bottom: 20px;
			}

			.blog-post-full .content {
				font-size: 18px;
				line-height: 1.6;
			}

			.blog-post-full .content p {
				margin-bottom: 15px;
			}

			.blog-post-full .featured-image {
				max-width: 100%;
				margin: 0 0 20px 0;
			}

			.back-link {
				font-size: 16px;
				margin: 15px 0;
			}

			#loading {
				padding: 60px 20px;
				font-size: 18px;
			}

			/* Contact banner */
			.contact-banner {
				padding: 30px 0;
			}

			.contact-details {
				flex-direction: column;
				gap: 20px;
			}

			.contact-info h2 {
				font-size: 28px;
			}

			.contact-item span {
				font-size: 16px;
			}

			.contact-item .phone {
				font-size: 20px;
			}

			/* Footer */
			#footer {
				width: 100%;
				padding: 20px;
			}

			#footer ul {
				width: 100%;
				padding: 20px 0;
			}
		}

		@media (max-width: 480px) {
			#header {
				height: 120px;
			}

			#header div a.logo {
				height: 120px;
			}

			.blog-post-full {
				margin: 15px 5px;
				padding: 20px 15px;
			}

			.blog-post-full h1 {
				font-size: 26px;
			}

			.blog-post-full .date {
				font-size: 14px;
			}

			.blog-post-full .content {
				font-size: 16px;
			}

			.contact-info h2 {
				font-size: 24px;
			}
		}
	</style>
	<script src="js/mobile-nav.js"></script>
	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-Z16VBQK1J4"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'G-Z16VBQK1J4');
	<!-- Microsoft Clarity -->
	<script type="text/javascript">
	    (function(c,l,a,r,i,t,y){
	        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
	        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
	        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
	    })(window, document, "clarity", "script", "tqrkh0s8id");
	</script>
	</script>
</head>
<body>
	<div id="header">
		<div>
			<a href="index.html" class="logo">Ross Estate Law</a>
		</div>
	</div>
	<div id="nav-placeholder"></div>
	<div id="body">
		<div id="loading">Loading blog post...</div>
		<div id="blog-post-container"></div>
	</div>
	<div class="contact-banner">
		<div class="contact-content">
			<div class="contact-info">
				<h2>Ross Estate Law</h2>
				<div class="contact-details">
					<div class="contact-item">
						<span class="phone">(902) 403-0008</span>
					</div>
					<div class="contact-item">
						<span class="email">megan@rossestatelaw.ca</span>
					</div>
					<div class="contact-item">
						<span class="address">99 Wyse Road, Suite 1100<br>Dartmouth, Nova Scotia<br>B3A 4S5</span>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div id="footer">
		<ul>
			<li>
				<a href="index.html">Home</a>
			</li>
			<li>
				<a href="about.html">About</a>
			</li>
			<li>
				<a href="estate-planning.html">Services</a>
			</li>
			<li>
				<a href="contact-us.html">Contact</a>
			</li>
			<li>
				<a href="legal.html">Privacy & Legal</a>
			</li>
		</ul>
	</div>

	<script>
		// Get post slug from URL
		function getPostSlug() {
			const params = new URLSearchParams(window.location.search);
			return params.get('post');
		}

		// Load and display blog post
		async function loadBlogPost() {
			const slug = getPostSlug();

			if (!slug) {
				document.getElementById('loading').innerHTML = '<p>Blog post not found.</p><a href="blog.html" class="back-link">← Back to Blog</a>';
				return;
			}

			try {
				// Fetch the specific post from GitHub
				const filename = slug + '.md';
				const response = await fetch(`https://api.github.com/repos/theRealSlickFrog/Megan-Ross/contents/_posts/${filename}`);

				if (!response.ok) {
					throw new Error('Post not found');
				}

				const fileData = await response.json();
				const contentResponse = await fetch(fileData.download_url);
				const content = await contentResponse.text();

				const post = parseMarkdownPost(content);

				if (!post) {
					throw new Error('Could not parse post');
				}

				// Update page title
				document.title = `${post.title} - Ross Estate Law`;

				// Display the post
				document.getElementById('loading').style.display = 'none';
				document.getElementById('blog-post-container').innerHTML = `
					<div class="blog-post-full">
						<a href="blog.html" class="back-link">← Back to All Posts</a>
						<h1>${escapeHtml(post.title)}</h1>
						<div class="date">${new Date(post.date).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}</div>
						${post.thumbnail ? `<img src="${post.thumbnail}" alt="${escapeHtml(post.title)}" class="featured-image">` : ''}
						<div class="content">${markdownToHtml(post.body)}</div>
						<a href="blog.html" class="back-link">← Back to All Posts</a>
					</div>
				`;

			} catch (error) {
				console.error('Error loading blog post:', error);
				document.getElementById('loading').innerHTML = '<p>Blog post not found.</p><a href="blog.html" class="back-link">← Back to Blog</a>';
			}
		}

		// Parse markdown post file
		function parseMarkdownPost(content) {
			const frontMatterRegex = /^---\s*\n([\s\S]*?)\n---\s*\n([\s\S]*)$/;
			const match = content.match(frontMatterRegex);

			if (!match) return null;

			const frontMatter = match[1];
			const body = match[2];

			const post = { body };

			// Parse front matter
			frontMatter.split('\n').forEach(line => {
				const [key, ...valueParts] = line.split(':');
				if (key && valueParts.length) {
					const value = valueParts.join(':').trim();
					post[key.trim()] = value;
				}
			});

			return post;
		}

		// Simple markdown to HTML converter
		function markdownToHtml(markdown) {
			if (!markdown || markdown.trim() === '') return '<p>No content</p>';

			// Split by double newlines for paragraphs, or single newlines if no double newlines
			const paragraphs = markdown.includes('\n\n')
				? markdown.split('\n\n')
				: markdown.split('\n');

			return paragraphs
				.map(para => para.trim())
				.filter(para => para.length > 0)
				.map(para => {
					// First escape HTML to prevent XSS
					let formatted = escapeHtml(para);

					// Then apply markdown formatting (after escaping)
					// Bold: **text** or __text__
					formatted = formatted.replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>');
					formatted = formatted.replace(/__(.+?)__/g, '<strong>$1</strong>');

					// Italic: *text* or _text_
					formatted = formatted.replace(/\*(.+?)\*/g, '<em>$1</em>');
					formatted = formatted.replace(/_(.+?)_/g, '<em>$1</em>');

					// Links: [text](url)
					formatted = formatted.replace(/\[(.+?)\]\((.+?)\)/g, '<a href="$2">$1</a>');

					// Replace single line breaks with <br>
					formatted = formatted.replace(/\n/g, '<br>');

					return `<p>${formatted}</p>`;
				})
				.join('');
		}

		// Escape HTML to prevent XSS
		function escapeHtml(text) {
			const div = document.createElement('div');
			div.textContent = text;
			return div.innerHTML;
		}

		// Load post when page loads
		document.addEventListener('DOMContentLoaded', loadBlogPost);
	</script>

	<script src="js/load-navigation.js"></script>
<script src="js/cookie-consent.js"></script>
</body>
</html>
